(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function r(e,t,n,o,a=!1){const s=document.createElement(e);return t&&(s.className=t),o&&(s.textContent=o),n&&(a&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s)),s}function m1(e){const t=u1(e),n=[];for(let o=0;o<t[0].length;o++){n[o]=[];for(let a=0;a<t.length;a++)n[o][a]=t[a][o]}return n}function u1(e){const t=e.length,n=e[0].length,o=Array(n).fill(0).map(()=>[]);for(let a=0;a<n;a++){let s=0;for(let c=0;c<t;c++)e[c][a]===1?s++:s>0&&(o[a].push(s),s=0);for(s>0&&o[a].push(s);o[a].length<5;)o[a].unshift(0)}return o}function d1(e){const t=e.length,n=Array(t).fill(0).map(()=>[]);for(let o=0;o<t;o++){let a=0;for(let s=0;s<e[o].length;s++)e[o][s]===1?a++:a>0&&(n[o].push(a),a=0);for(a>0&&n[o].push(a);n[o].length<5;)n[o].unshift(0)}return n}const M={matrix1:{size:5,name:"Airplane",data:[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,0,1,0,0],[0,1,1,1,0]]},matrix2:{size:5,name:"Cross",data:[[0,1,1,1,0],[1,1,0,1,1],[1,0,0,0,1],[1,1,0,1,1],[0,1,1,1,0]]},matrix3:{size:5,name:"Snack",data:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[0,0,0,0,1],[1,1,1,1,1]]},matrix4:{size:5,name:"Bat",data:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[1,0,1,0,1],[1,0,0,0,1]]},matrix5:{size:5,name:"Chess",data:[[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1]]},matrix6:{size:10,name:"Clown",data:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,0,0,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,1],[0,1,0,1,0,0,1,0,1,0],[1,0,0,0,1,1,0,0,0,1],[1,0,0,0,1,1,0,0,0,1],[0,1,0,0,0,0,1,0,1,0],[0,1,0,0,1,1,0,0,1,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0]]},matrix7:{size:10,name:"Leaf",data:[[0,0,0,0,1,1,1,1,1,1],[0,0,0,1,0,1,0,1,0,1],[0,0,1,1,0,1,0,1,1,0],[0,1,0,1,0,1,1,0,1,0],[0,1,0,1,0,1,1,1,1,0],[0,1,0,1,1,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,1,0,1,1,1,1,0,0,0],[1,1,0,0,0,0,0,0,0,0]]},matrix8:{size:10,name:"Music",data:[[0,0,0,0,0,0,1,1,1,1],[0,0,0,1,1,1,0,0,0,1],[0,0,0,1,0,0,0,1,1,1],[0,0,0,1,1,1,1,0,0,1],[0,0,0,1,0,0,0,1,1,1],[0,1,1,1,0,0,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,0],[0,1,1,0,0,0,0,0,0,0]]},matrix9:{size:10,name:"TV",data:[[0,0,1,0,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,0,1,0]]},matrix10:{size:10,name:"House",data:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]},matrix11:{size:15,name:"Peak",data:[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,1,0,1,1,1,1,1,1],[0,1,1,1,1,0,0,1,0,0,1,1,1,1,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,0,0,0,0,0]]},matrix12:{size:15,name:"Pocket Watch",data:[[0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,1,1,0,0,0,0,1,1,0],[0,0,0,0,1,1,1,0,1,1,1,1,1,1,1],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],[0,0,0,1,1,1,1,1,0,0,0,0,0,0,1],[0,0,1,1,1,1,1,1,1,0,0,0,0,0,1],[0,1,1,1,0,1,0,1,1,1,0,0,0,0,1],[1,1,1,0,0,1,0,0,1,1,1,0,0,1,1],[1,1,0,0,0,1,0,0,0,1,1,0,0,0,1],[1,1,1,0,0,1,1,0,1,1,1,0,0,0,1],[1,1,0,0,0,0,0,0,0,1,1,0,0,1,1],[1,1,1,0,0,0,0,0,1,1,1,0,0,0,1],[0,1,1,1,0,1,0,1,1,1,0,0,0,0,1],[0,0,1,1,1,1,1,1,1,0,0,0,0,1,1],[0,0,0,1,1,1,1,1,0,0,0,0,0,0,0]]},matrix13:{size:15,name:"Sun",data:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1,1,1,0,1,1],[1,1,1,0,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,0,1,0,0,1,1,1,1],[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,1,1,1,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,0,1,1,1],[1,1,0,1,1,1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},matrix14:{size:15,name:"Flowers",data:[[1,1,0,1,0,1,1,1,1,1,1,1,1,1,1],[1,0,0,1,0,0,1,1,1,1,1,0,1,0,1],[1,1,1,0,1,1,1,1,1,1,0,0,1,0,0],[1,0,0,1,0,0,1,1,1,1,1,1,0,1,1],[1,1,0,1,0,1,0,1,1,1,0,0,1,0,0],[1,1,1,1,1,1,0,1,1,0,1,0,1,0,1],[1,1,1,1,1,1,0,1,0,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,1,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,1,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,1,0,1,1,1,1],[1,1,1,0,0,0,0,0,0,0,1,0,1,1,1],[1,1,1,0,0,0,0,0,0,0,1,0,1,1,1],[1,1,1,1,0,0,0,0,0,1,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1]]},matrix15:{size:15,name:"Swan",data:[[1,1,1,1,1,1,1,1,1,1,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,1,0,0,1,1,1,1,1,0,1,1,1,1],[1,0,0,1,0,0,0,0,1,1,0,1,1,1,1],[1,1,0,0,1,1,0,0,0,1,1,0,1,1,1],[1,1,0,1,0,0,1,1,0,1,1,0,0,1,1],[1,1,1,0,1,1,0,0,1,0,1,1,0,0,1],[1,1,1,0,0,0,1,1,0,1,0,0,1,0,1],[1,1,1,0,1,1,0,0,1,0,0,0,1,0,1],[0,1,1,0,0,0,1,1,0,1,0,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,1,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]}};let S,x,w,K,Q;function f1(){S=r("div","game__stop-watch stop-watch",b),x=r("span","stop-watch__minutes",S,"00"),w=r("span","stop-watch__seconds",S,"00");const e=document.createTextNode(":");x.parentNode.insertBefore(e,w)}let f=0,u=0,B;function p1(){u++,u>59&&(f++,u=0),w.innerHTML=u<10?`0${u}`:u,x.innerHTML=f<10?`0${f}`:f}let I=!1;function O(e=0,t=0){I||(f=e,u=t,V(),B=setInterval(p1,1e3),I=!0)}function V(){w.innerHTML=u<10?`0${u}`:u,x.innerHTML=f<10?`0${f}`:f}const Y=()=>{clearInterval(B)},g1=()=>I,_1=()=>{const e=JSON.parse(localStorage.getItem("currentPuzzle"));e.totalTime=Number(x.innerHTML*60)+Number(w.innerHTML),localStorage.setItem("currentPuzzle",JSON.stringify(e))},k=()=>{u=0,f=0,V(),clearInterval(B),I=!1};function X(e,t,n){e.querySelectorAll(".stop-watch__title").forEach(c=>c.remove());const a=document.createElement("h3");a.className="stop-watch__title stop-watch__title_size",a.textContent=`${n}x${n}`;const s=document.createElement("h3");s.className="stop-watch__title stop-watch__title_name",s.textContent=t,e.insertBefore(a,e.firstChild),e.insertBefore(s,a.nextSibling)}function A(){const e=B1().length;h1(),W(e),k(),m(g,!0)}function h1(){const e=document.querySelectorAll(".game__game-cell"),t=document.querySelectorAll(".game__cross1"),n=document.querySelectorAll(".game__cross2");e.forEach(a=>{a.classList.remove("game__game-cell_active")}),q(t),q(n),JSON.parse(localStorage.getItem("savedGame"))&&m(p,!1),m(v,!0)}function q(e){e.forEach(t=>{t.classList.add("game__cross_opacity")})}function y1(){const e=H(),t=v1(),n=JSON.parse(localStorage.getItem("currentPuzzle"));let o=n?n.name:"Unknown",a=n?n.size:"Unknown",s=JSON.parse(localStorage.getItem("results"))||[];s.push({gameTime:e,totalInSeconds:t,puzzleName:o,puzzleSize:a}),localStorage.setItem("results",JSON.stringify(s))}function H(){return{minutes:x.innerHTML,seconds:w.innerHTML}}function v1(){let{minutes:e,seconds:t}=H();return Number(e*60)+Number(t)}function x1(){if(!g1())return;Y(),m(g,!0);const e=H(),t=document.querySelector(".game__game-grid"),n=Math.sqrt(t.children.length);let o=Array.from({length:n},()=>Array(n).fill(0));document.querySelectorAll(".game__game-cell").forEach((s,c)=>{const i=Math.floor(c/n),l=c%n;s.classList.contains("game__game-cell_active")&&(o[i][l]=1)}),localStorage.setItem("savedGame",JSON.stringify({savedMatrix:o,time:e,name:"Unknown",size:n})),A(),m(p,!1)}function w1(){m(p,!0),m(v,!1),m(g,!1);let e=JSON.parse(localStorage.getItem("savedGame"));if(e){a1();const t=parseInt(e.time.minutes,10),n=parseInt(e.time.seconds,10);O(t,n),K.innerHTML=`${e.size}x${e.size}`,Q.innerHTML=e.name;const a=Object.values(M).find(s=>s.name===e.name);if(a){const{size:s,data:c}=a;J(s,c),z1(e.savedMatrix),A1(e.savedMatrix),o1(c)}else m(p,!0)}else m(p,!0)}function z1(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)if(e[t][n]===1){const o=`.game__game-cell[data-row="${t}"][data-col="${n}"]`,a=document.querySelector(o);a&&a.classList.add("game__game-cell_active")}}function T1(){A();const e=b1();J(e.size,e.data),K.innerHTML=`${e.size}x${e.size}`,Q.innerHTML=e.name,localStorage.setItem("currentPuzzle",JSON.stringify({name:e.name,size:e.size,totalTime:0}))}function b1(){const e=Object.keys(M),t=e[Math.floor(Math.random()*e.length)];return M[t]}let v,D,g,p;function S1(e){v=r("button","side-panel__button side-panel__reset-button",e,"Reset"),D=r("button","side-panel__button side-panel__random-button",e,"Random"),g=r("button","side-panel__button side-panel__save-button",e,"Save game"),p=r("button","side-panel__button side-panel__continue-button",e,"Continue saved game"),r("button","side-panel__button side-panel__theme-button",e,"Dark theme"),v.addEventListener("click",A),D.addEventListener("click",T1),g.addEventListener("click",x1),p.addEventListener("click",w1)}function m(e,t=!0){e.disabled=t}let d,C,L;function M1(){d.style.visibility="visible",d.style.opacity="1",d.showModal()}function R(){d.style.visibility="hidden",d.style.opacity="0",d.close()}function L1(e){e.key==="Escape"&&R()}function Z(){d?C.innerHTML="":(d=r("dialog","dialog",N),C=r("div","dialog__inner-box",d),L=r("button","dialog__close-button close-button",d),r("span","close-button__item1",L),r("span","close-button__item2",L)),L.addEventListener("click",R),window.addEventListener("keydown",L1),M1()}function $1(e){const t=parseInt(e.split("x")[0]),n=Object.values(M).filter(s=>s.size===t);e1(`Puzzle size: ${e}`);const o=r("div","dialog__text",C);let a;n.forEach(s=>{a=r("button","dialog__name",o,s.name),a.addEventListener("click",function(){N1(s.size,s.data),X(S,s.name,s.size),k(),localStorage.setItem("currentPuzzle",JSON.stringify({name:s.name,size:s.size}))})})}function e1(e){return r("h3","dialog__title",C,e)}function N1(e,t){R(),J(e,t),JSON.parse(localStorage.getItem("savedGame"))&&m(p,!1)}let E;function I1(e){const t=r("div","header",e,null,!0);E=r("div","header__wrapper",t),r("h1","header__title",E,"Nonogram"),C1()}let j,G,P,$,t1;function C1(){P=r("menu","header__menu menu",E),j=r("li","menu__item menu__score",P,"Score"),$=r("ul","menu__dropdown-wrapper",j),n1(),G=r("li","menu__item menu__select-puzzle",P,"Select Puzzle"),t1=r("ul","menu__dropdown-wrapper",G),P1()}function P1(){J1.forEach(e=>{const t=r("li","menu__dropdown-item",t1);O1(G,t),r("button","menu__dropdown-button",t,e),t.addEventListener("click",function(){Z(),$1(e)})})}function n1(){const e=JSON.parse(localStorage.getItem("results"))||[];if($.innerHTML="",e.length===0){const t=r("li","menu__dropdown-item menu__dropdown-item_no-data",$);r("div","menu__dropdown-button menu__dropdown-button_no-data",t,"No results yet")}else e.slice(-5).sort((t,n)=>t.totalInSeconds-n.totalInSeconds).forEach((t,n)=>{if(n<5){const o=r("li","menu__dropdown-item",$);r("div","menu__dropdown-button",o,`${t.puzzleName} ${t.puzzleSize}x${t.puzzleSize} in ${t.gameTime.minutes}:${t.gameTime.seconds}`)}})}function O1(e,t,n="max"){let o;n==="max"?o=Math.max(e.offsetWidth,t.offsetWidth):n==="min"&&(o=Math.min(e.offsetWidth,t.offsetWidth)),e.style.width=`${o}px`,t.style.width=`${o}px`}function E1(){setTimeout(()=>{m(g,!0);const e=document.querySelectorAll(".game__cross1"),t=document.querySelectorAll(".game__cross2"),n=document.querySelectorAll(".game__game-cell");e.forEach(o=>o.classList.remove("game__cross_opacity")),t.forEach(o=>o.classList.remove("game__cross_opacity")),n.forEach(o=>o.style.pointerEvents="none")},1e3),setTimeout(()=>{n1(),Z();const e=JSON.parse(localStorage.getItem("currentPuzzle")),t=e1(`Great! You have solved the nonogram in ${e.totalTime} seconds!`);t.style.padding="50px"},2e3)}let z=[];function W(e){z=Array(e).fill().map(()=>Array(e).fill(0))}function G1(e,t){z[e][t]=z[e][t]===1?0:1}function B1(){return z}function o1(e){k1(z,e)&&(Y(),_1(),y1(),E1(),localStorage.removeItem("savedGame"))}function k1(e,t){for(let n=0;n<e.length;n++)for(let o=0;o<e.length;o++)if(e[n][o]!==t[n][o])return!1;return!0}function A1(e){z=e.map(t=>[...t])}let b,_,h,y;function J(e,t){const n=e;F(n),window.addEventListener("resize",()=>F(n)),a1(),s1(n,t),W(n)}function a1(){_.innerHTML="",h.innerHTML="",y.innerHTML=""}function H1(e,t,n){window.matchMedia("(max-width: 700px)").matches?(_.style.gridTemplateRows=`repeat(5, ${n}px)`,_.style.gridTemplateColumns=`repeat(${e}, ${n}px)`,h.style.gridTemplateRows=`repeat(${e}, ${n}px)`,h.style.gridTemplateColumns=`repeat(5, ${n}px)`,y.style.gridTemplateRows=`repeat(${e}, ${n}px)`,y.style.gridTemplateColumns=`repeat(${e}, ${n}px)`):(_.style.gridTemplateRows=`repeat(5, ${t}px)`,_.style.gridTemplateColumns=`repeat(${e}, ${t}px)`,h.style.gridTemplateRows=`repeat(${e}, ${t}px)`,h.style.gridTemplateColumns=`repeat(5, ${t}px)`,y.style.gridTemplateRows=`repeat(${e}, ${t}px)`,y.style.gridTemplateColumns=`repeat(${e}, ${t}px)`)}function F(e){H1(e,32,20)}function s1(e,t){const n="#454545",o=[];for(let i=0;i<5*e;i++){const l=r("div","game__number-cell",_);o.push(l),(i+1)%e!==0&&(i+1)%5===0&&(l.style.borderRight=`1px solid ${n}`)}const a=m1(t);for(let i=0;i<a.length;i++)for(let l=0;l<a[i].length;l++){const T=i*e+l;a[i][l]!==0&&(o[T].textContent=a[i][l])}const s=[];for(let i=0;i<5*e;i++){const l=r("div","game__number-cell",h);s.push(l),i<e*5-e&&Math.floor(i/5)%5===4&&(l.style.borderBottom=`1px solid ${n}`)}const c=d1(t);for(let i=0;i<c.length;i++)for(let l=0;l<c[i].length;l++){const T=i*5+l;c[i][l]!==0&&(s[T].textContent=c[i][l])}for(let i=0;i<e*e;i++){const l=r("div","game__game-cell",y);l.dataset.row=Math.floor(i/e),l.dataset.col=i%e;const T=Math.floor(i/e),r1=i%e;(i+1)%e!==0&&(i+1)%5===0&&(l.style.borderRight=`1px solid ${n}`),i<e*e-e&&Math.floor(i/e)%5===4&&(l.style.borderBottom=`1px solid ${n}`);const i1=r("span","game__cross1 game__cross_opacity",l),l1=r("span","game__cross2 game__cross_opacity",l);l.addEventListener("click",function(){l.classList.toggle("game__game-cell_active"),G1(T,r1),o1(t),O(),m(g,!1),m(v,!1)}),l.addEventListener("contextmenu",function(c1){c1.preventDefault(),i1.classList.toggle("game__cross_opacity"),l1.classList.toggle("game__cross_opacity"),O(),m(g,!1),m(v,!1)})}}function R1(e){b=r("div","main-content__game game",e),f1(),_=r("div","game__top-num-grid",b),h=r("div","game__left-num-grid",b),y=r("div","game__game-grid",b)}const N=document.body;let U;function W1(e){N.className="page",I1(N);const t=r("div","page__wrapper",N),n=r("div","main-content",t);U=r("div","main-content__side-panel side-panel",n),S1(U),R1(n);const o=Object.values(M).find(a=>a.size===e);o&&(s1(e,o.data),W(e),localStorage.setItem("currentPuzzle",JSON.stringify({name:o.name,size:o.size})),X(S,o.name,o.size),m(g,!0),JSON.parse(localStorage.getItem("savedGame"))||m(p,!0)),k(),m(v,!0)}const J1=["5x5","10x10","15x15"];document.addEventListener("DOMContentLoaded",function(){W1(5)});
